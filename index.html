<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Performance Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .dashboard-section { display: none; }
        .login-section { max-width: 600px; margin: 2rem auto; }
        .grade-A { color: #28a745; font-weight: bold; }
        .grade-B { color: #17a2b8; font-weight: bold; }
        .grade-C { color: #ffc107; font-weight: bold; }
        .grade-D { color: #fd7e14; font-weight: bold; }
        .grade-E { color: #dc3545; font-weight: bold; }
        .rank-improvement { color: #28a745; }
        .rank-decline { color: #dc3545; }
        .rank-no-change { color: #6c757d; }
        .subject-cell { min-width: 100px; }
        .absent { color: #dc3545; font-style: italic; }
        .performance-card { height: 100%; }
        .chart-container { position: relative; height: 300px; }
    </style>
</head>
<body>
    <div class="container py-4">
        <!-- Login Section -->
        <div id="login-section" class="login-section card">
            <div class="card-header bg-primary text-white">
                <h3 class="card-title text-center">Student Performance Dashboard</h3>
            </div>
            <div class="card-body">
                <form id="student-login-form">
                    <div class="mb-3">
                        <label for="class-select" class="form-label">Class</label>
                        <select class="form-select" id="class-select" required>
                            <option value="" selected disabled>Select Class</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="student-select" class="form-label">Student Name</label>
                        <select class="form-select" id="student-select" disabled required>
                            <option value="" selected disabled>Select Student</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="dob-input" class="form-label">Date of Birth</label>
                        <input type="date" class="form-control" id="dob-input" required>
                    </div>
                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary">View Dashboard</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Dashboard Section -->
        <div id="dashboard-section" class="dashboard-section">
            <div class="card mb-4">
                <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                    <h3 class="card-title">Student Performance Summary</h3>
                    <button id="change-student-btn" class="btn btn-light btn-sm">Change Student</button>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4">
                            <h4 id="student-name" class="text-primary"></h4>
                            <div id="student-details"></div>
                        </div>
                        <div class="col-md-8">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="card performance-card bg-light mb-3">
                                        <div class="card-header">1st Term</div>
                                        <div class="card-body">
                                            <h5 class="card-title" id="term1-total"></h5>
                                            <p class="card-text" id="term1-rank"></p>
                                            <p class="card-text" id="term1-percentage"></p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card performance-card bg-light mb-3">
                                        <div class="card-header">2nd Term</div>
                                        <div class="card-body">
                                            <h5 class="card-title" id="term2-total"></h5>
                                            <p class="card-text" id="term2-rank"></p>
                                            <p class="card-text" id="term2-percentage"></p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card performance-card bg-light mb-3">
                                        <div class="card-header">3rd Term</div>
                                        <div class="card-body">
                                            <h5 class="card-title" id="term3-total"></h5>
                                            <p class="card-text" id="term3-rank"></p>
                                            <p class="card-text" id="term3-percentage"></p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row mb-4">
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-header bg-info text-white">
                            <h5 class="card-title">Term-wise Performance</h5>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="performance-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-header bg-info text-white">
                            <h5 class="card-title">Subject-wise Marks</h5>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="subject-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-header bg-success text-white">
                    <h5 class="card-title">Detailed Marks</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-bordered table-hover">
                            <thead class="table-light">
                                <tr>
                                    <th>Subject</th>
                                    <th>1st Term</th>
                                    <th>2nd Term</th>
                                    <th>3rd Term</th>
                                    <th>Progress</th>
                                </tr>
                            </thead>
                            <tbody id="marks-table-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-analytics.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyAzq1mLJ93YRLcUh0jZMsBjZxN9Q4BNGFA",
          authDomain: "project-v-da5ed.firebaseapp.com",
          projectId: "project-v-da5ed",
          storageBucket: "project-v-da5ed.firebasestorage.app",
          messagingSenderId: "968374020029",
          appId: "1:968374020029:web:b58ae660c64f5d6a2614d4",
          measurementId: "G-XBDQ21TYD9"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
      </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>
</html>